<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DGit - Design File Version Control</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
</head>
<body>
  <!-- macOS 스타일 타이틀바 -->
  <div class="titlebar">
    <div class="traffic-lights">
      <div class="traffic-light close" id="closeBtn"></div>
      <div class="traffic-light minimize" id="minimizeBtn"></div>
      <div class="traffic-light maximize" id="maximizeBtn"></div>
    </div>
    <div class="titlebar-title">DGit - Design File Version Control</div>
  </div>

  <!-- 시작 화면 -->
  <div id="startScreen" class="start-screen">
    <div class="start-content">
      <div class="start-header">
        <div class="app-logo">
          <i class="fas fa-palette"></i>
        </div>
        <h1>DGit</h1>
        <p>디자인 파일 전용 버전 관리 시스템</p>
      </div>
      
      <div class="start-actions">
        <button class="start-btn primary" id="newProjectBtn">
          <i class="fas fa-plus-circle"></i>
          새 프로젝트 선택
        </button>
        
        <div class="recent-projects" id="recentProjects">
          <h3>최근 프로젝트</h3>
          <div class="recent-list" id="recentList">
            <!-- 최근 프로젝트 리스트가 여기에 표시됩니다 -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="app-container" id="mainApp" style="display: none;">
    <!-- macOS 스타일 툴바 -->
    <div class="toolbar">
      <div class="toolbar-section">
        <button class="btn" id="homeBtn">
          <i class="fas fa-home"></i>
          홈
        </button>
        <button class="btn primary" id="selectDirBtn">
          <i class="fas fa-folder-open"></i>
          프로젝트 변경
        </button>
      </div>
      
      <div class="toolbar-separator"></div>
      
      <div class="toolbar-section">
        <button class="btn" id="scanBtn" disabled>
          <i class="fas fa-search"></i>
          스캔
        </button>
        <button class="btn success" id="initRepoBtn" disabled style="display: none;">
          <i class="fas fa-plus-circle"></i>
          저장소 초기화
        </button>
      </div>
      
      <div class="toolbar-separator"></div>
      
      <div class="toolbar-section">
        <button class="btn" id="addAllBtn" disabled>
          <i class="fas fa-plus"></i>
          모든 파일 추가
        </button>
        <button class="btn success" id="commitBtn" disabled>
          <i class="fas fa-check-circle"></i>
          커밋
        </button>
      </div>
      
      <div style="flex: 1;"></div>
      
      <div class="toolbar-section">
        <button class="btn" id="refreshStatusBtn" disabled>
          <i class="fas fa-refresh"></i>
          새로고침
        </button>
      </div>
    </div>

    <main class="main-content">
      <!-- 사이드바 -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="project-path empty" id="currentProject">
            프로젝트를 선택하세요
          </div>
        </div>
        
        <nav class="sidebar-nav">
          <div class="nav-section">
            <div class="nav-section-title">Navigation</div>
            <button class="nav-item active" data-view="statusView">
              <i class="fas fa-info-circle"></i>
              프로젝트 상태
            </button>
            <button class="nav-item" data-view="filesView">
              <i class="fas fa-file-image"></i>
              디자인 파일
            </button>
            <button class="nav-item" data-view="historyView">
              <i class="fas fa-history"></i>
              커밋 히스토리
            </button>
          </div>
          
          <div class="nav-section">
            <div class="nav-section-title">Tools</div>
            <button class="nav-item" data-view="settingsView">
              <i class="fas fa-cog"></i>
              설정
            </button>
          </div>
        </nav>
      </aside>

      <!-- 메인 콘텐츠 -->
      <div class="content-area">
        <!-- 상태 뷰 -->
        <section id="statusView" class="view active">
          <div class="view-header">
            <div class="view-title">
              <i class="fas fa-info-circle"></i>
              프로젝트 상태
            </div>
          </div>
          
          <div id="statusContent" class="status-content">
            <!-- 프로젝트 상태가 여기에 표시됩니다 -->
          </div>
        </section>

        <!-- 파일 뷰 -->
        <section id="filesView" class="view">
          <div class="view-header">
            <div class="view-title">
              <i class="fas fa-file-image"></i>
              디자인 파일
            </div>
            <div class="view-actions">
              <button class="btn" id="restoreBtn" disabled>
                <i class="fas fa-undo"></i>
                복원
              </button>
              <button class="btn" id="openExplorerBtn" disabled>
                <i class="fas fa-external-link-alt"></i>
                Finder에서 보기
              </button>
            </div>
          </div>
          
          <div id="filesContent" class="file-list-container">
            <div class="file-list-header">
              프로젝트 파일
            </div>
            <div class="file-list" id="fileList">
              <!-- 파일 리스트가 여기에 표시됩니다 -->
            </div>
          </div>
        </section>

        <!-- 히스토리 뷰 -->
        <section id="historyView" class="view">
          <div class="view-header">
            <div class="view-title">
              <i class="fas fa-history"></i>
              커밋 히스토리
            </div>
            <div class="view-actions">
              <button class="btn" id="refreshLogBtn">
                <i class="fas fa-refresh"></i>
                새로고침
              </button>
            </div>
          </div>
          
          <div class="file-list-container">
            <div class="file-list-header">
              커밋 기록
            </div>
            <div id="historyContent" class="history-content">
              <div class="empty-state">
                커밋 히스토리가 없습니다
              </div>
            </div>
          </div>
        </section>

        <!-- 설정 뷰 -->
        <section id="settingsView" class="view">
          <div class="view-header">
            <div class="view-title">
              <i class="fas fa-cog"></i>
              설정
            </div>
          </div>
          
          <div class="settings-content">
            <div class="setting-group">
              <div class="setting-card">
                <div class="setting-card-header">
                  <i class="fas fa-info-circle"></i>
                  DGit 정보
                </div>
                <div class="setting-info">
                  <div class="info-item">
                    <div class="info-label">버전</div>
                    <div class="info-value">1.0.0</div>
                  </div>
                  <div class="info-item">
                    <div class="info-label">지원 형식</div>
                    <div class="info-value">PSD, AI, Sketch, Figma, XD</div>
                  </div>
                  <div class="info-item">
                    <div class="info-label">플랫폼</div>
                    <div class="info-value">macOS</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- 터미널 -->
    <div class="terminal-wrapper" id="terminalWrapper">
      <div class="terminal-header" id="terminalHeader">
        <div class="terminal-title">
          <i class="fas fa-terminal"></i>
          출력
        </div>
        <div class="terminal-actions">
          <button class="btn-icon" id="clearTerminalBtn">
            <i class="fas fa-trash"></i>
          </button>
          <button class="btn-icon" id="toggleTerminalBtn">
            <i class="fas fa-chevron-down"></i>
          </button>
        </div>
      </div>
      <div class="terminal-area" id="terminalArea">
        <div id="terminal" class="terminal-content">
          <div class="terminal-line">
            <span class="timestamp">[시작]</span> DGit 준비 완료
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 커밋 모달 -->
  <div id="commitModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">커밋 메시지</div>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <textarea id="commitMessage" class="text-input" placeholder="변경 사항을 설명하는 메시지를 입력하세요..."></textarea>
      </div>
      <div class="modal-footer">
        <button id="cancelCommitBtn" class="btn">취소</button>
        <button id="confirmCommitBtn" class="btn success">커밋</button>
      </div>
    </div>
  </div>

  <script src="index.js"></script>

  <div id="restoreModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">파일 복원</div>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p><strong id="restoreFileName">파일명</strong>을 복원할 버전을 선택하세요:</p>
        <div class="version-list" id="versionList">
          <!-- 버전 목록이 여기에 표시됩니다 -->
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancelRestoreBtn" class="btn">취소</button>
        <button id="confirmRestoreBtn" class="btn primary" disabled>복원</button>
      </div>
    </div>
  </div>

  <!-- index.html의 commitModal 다음에 추가할 HTML -->

<!-- DGit 초기화 모달 -->
<div id="initModal" class="modal-overlay">
  <div class="modal init-modal">
    <div class="modal-header init-modal-header">
      <div class="init-modal-icon">
        <i class="fas fa-palette"></i>
      </div>
      <div class="modal-title">DGit 저장소 초기화</div>
      <div class="init-modal-subtitle">디자인 파일 버전 관리를 시작합니다</div>
      <button class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <div class="init-info-card">
        <div class="init-info-item">
          <div class="init-info-icon">
            <i class="fas fa-check"></i>
          </div>
          <div class="init-info-text">프로젝트 폴더에 .dgit 저장소가 생성됩니다</div>
        </div>
        <div class="init-info-item">
          <div class="init-info-icon">
            <i class="fas fa-check"></i>
          </div>
          <div class="init-info-text">기존 파일들은 그대로 유지됩니다</div>
        </div>
        <div class="init-info-item">
          <div class="init-info-icon">
            <i class="fas fa-check"></i>
          </div>
          <div class="init-info-text">PSD, AI, Sketch 등 디자인 파일들을 추적할 수 있습니다</div>
        </div>
        <div class="init-info-item">
          <div class="init-info-icon">
            <i class="fas fa-shield-alt"></i>
          </div>
          <div class="init-info-text">언제든지 이전 버전으로 복원할 수 있습니다</div>
        </div>
      </div>
      
      <div class="init-path-label">초기화할 프로젝트 경로:</div>
      <div class="init-path-display" id="initProjectPath">
        경로를 확인하는 중...
      </div>
      
      <div style="background: rgba(52, 199, 89, 0.1); border: 1px solid rgba(52, 199, 89, 0.2); border-radius: 6px; padding: 12px; margin-top: 16px;">
        <div style="display: flex; align-items: center; gap: 8px; color: var(--macos-success); font-size: 13px; font-weight: 500;">
          <i class="fas fa-info-circle"></i>
          <span>안전한 작업입니다</span>
        </div>
        <div style="font-size: 12px; color: var(--macos-text-secondary); margin-top: 4px; line-height: 1.4;">
          초기화 과정에서 기존 파일들은 변경되지 않으며, 언제든지 .dgit 폴더를 삭제하여 되돌릴 수 있습니다.
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button id="cancelInitBtn" class="btn">
        나중에 하기
      </button>
      <button id="confirmInitModalBtn" class="btn success">
        <i class="fas fa-rocket"></i>
        초기화 시작
      </button>
    </div>
  </div>
</div>
</body>
</html>